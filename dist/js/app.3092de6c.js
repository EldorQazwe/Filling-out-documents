(function(){"use strict";var t={5736:function(t,e,n){var i=n(9242),o=n(3396);function a(t,e){const n=(0,o.up)("router-link"),i=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",null,[(0,o.Wm)(n,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1})]),(0,o.Wm)(i)],64)}var s=n(89);const l={},r=(0,s.Z)(l,[["render",a]]);var c=r,d=n(2483),p=n(7139),u=n.p+"img/docx.d7b278de.png";const f=t=>((0,o.dD)("data-v-65917ab1"),t=t(),(0,o.Cn)(),t),m={class:"form"},h={class:"flex wrap card__wrapper"},g=["onClick"],b=f((()=>(0,o._)("span",{class:"glyphicon glyphicon-floppy-remove",style:{"font-size":"18px"}},null,-1))),w=[b],v=f((()=>(0,o._)("div",null,[(0,o._)("img",{src:u,class:"avatar"})],-1))),_={class:"test"},y={class:"card__name"};function k(t,e,n,a,s,l){const r=(0,o.up)("AppendDocument"),c=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r,{onCreate:l.createDocument},null,8,["onCreate"]),(0,o.wy)((0,o._)("div",m,[(0,o.Uk)(" Документы отсуствуют. "),(0,o._)("p",{onClick:e[0]||(e[0]=(...t)=>l.openUploadFile&&l.openUploadFile(...t)),style:{color:"#4cbc89",cursor:"pointer",display:"contents"}}," Загрузить? ")],512),[[i.F8,!s.files.length]]),(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.files,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"card",key:t.id},[(0,o._)("button",{onClick:e=>l.deleteDocument(t.id),class:"btn-delete"},w,8,g),(0,o.Wm)(c,{to:{name:"file",params:{id:t.id}}},{default:(0,o.w5)((()=>[v,(0,o._)("div",_,[(0,o._)("h4",y,(0,p.zw)(t.info.name),1),(0,o._)("p",null,(0,p.zw)(t.info.desc),1)])])),_:2},1032,["to"])])))),128))])],64)}n(7658);const D=t=>((0,o.dD)("data-v-ca75dc9a"),t=t(),(0,o.Cn)(),t),x={style:{"padding-bottom":"30px"}},C=D((()=>(0,o._)("link",{href:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css",rel:"stylesheet"},null,-1))),$={class:"input-group"},O={class:"input-group-addon"},F=D((()=>(0,o._)("i",{class:"glyphicon glyphicon-console"},null,-1))),j=["disabled","placeholder"],z={class:"input-group-btn"},H=["disabled"],N=D((()=>(0,o._)("i",{class:"glyphicon glyphicon-remove-circle"},null,-1))),U=[N];function I(t,e,n,a,s,l){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o._)("input",{id:"input",ref:"file",type:"file",onChange:e[0]||(e[0]=(...t)=>l.setFileName&&l.setFileName(...t)),accept:".docx"},null,544),[[i.F8,!1]]),(0,o._)("div",x,[C,(0,o._)("div",$,[(0,o._)("span",O,[F,(0,o.Uk)(" "+(0,p.zw)(this.fileName),1)]),(0,o.wy)((0,o._)("input",{disabled:s.disabled,type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>s.description=t),placeholder:s.disabled?"Загрузите файл":"Ведите краткое описание файла",minlength:"5",maxlength:"30",required:""},null,8,j),[[i.nr,s.description]]),(0,o._)("span",z,[s.fileName?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,p.C_)({disabled:s.loading})},[(0,o._)("button",{class:"btn btn-info",onClick:e[3]||(e[3]=(...t)=>l.commitFile&&l.commitFile(...t)),disabled:!(s.description.length>=5&&s.description.length<=30)}," Добавить ",8,H),(0,o._)("button",{style:{"margin-left":"10px"},class:"btn btn-danger",onClick:e[4]||(e[4]=(...t)=>l.clear&&l.clear(...t))},U)],2)):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-success",onClick:e[2]||(e[2]=t=>this.$refs.file.click())}," Загрузить "))])])])],64)}var P=n(4677),q={data(){return{fileName:"",description:"",disabled:!0,loading:!1}},setup(){const t=(0,P.pm)();return{toast:t}},methods:{setFileName(){this.disabled=!this.disabled,this.fileName=document.getElementById("input").files.item(0).name,this.toast.info(`Вы выбрали файл ${this.fileName}\n Теперь введите описание документа`)},clear(){this.$refs.file.value="",this.fileName="",this.description="",this.disabled=!0,this.loading=!1},async commitFile(){let t=new FormData;t.append("file",this.$refs.file.files[0]),t.append("name",this.fileName),t.append("desc",this.description),this.loading=!0;const e=await fetch("http://eldorqazwe.online/upload_template",{method:"POST",body:t}),n=await e.json();n.status?(this.toast.info(`Вы создали документ №${n.data.id}`),this.$emit("create",n.data),this.$emit("open",document.getElementById("input")),this.clear()):this.toast.error(`Произошла ошибка, ${n.msg}`)}}};const B=(0,s.Z)(q,[["render",I],["__scopeId","data-v-ca75dc9a"]]);var Y=B,Z={name:"HomeView",components:{RouterLink:d.rH,AppendDocument:Y},setup(){const t=(0,P.pm)();return{toast:t}},data(){return{files:[]}},methods:{createDocument(t){this.files.push(t)},openUploadFile(){document.getElementById("input").click()},async deleteDocument(t){const e=await fetch(`http://eldorqazwe.online/delete_template?id=${t}`);if(e.ok){const n=await e.json();n.status&&(this.files=this.files.filter((e=>e.id!=t)),this.toast.info(`Документ №${t} удалён`))}}},async mounted(){const t=await fetch("http://eldorqazwe.online/get_template_list");if(t.ok){const e=await t.json();e.status&&(this.files=e.data)}}};const E=(0,s.Z)(Z,[["render",k],["__scopeId","data-v-65917ab1"]]);var L=E;const T=t=>((0,o.dD)("data-v-019b26e0"),t=t(),(0,o.Cn)(),t),W=T((()=>(0,o._)("link",{href:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css",rel:"stylesheet"},null,-1))),R={key:0},S={key:0,class:"form"},A={key:1},K={class:"form"},V=["for"],M=["id","placeholder"],G={key:1,class:"form"};function J(t,e,n,i,a,s){return(0,o.wg)(),(0,o.iD)(o.HY,null,[W,a.file.id?((0,o.wg)(),(0,o.iD)("div",R,[a.file.patterns.length?((0,o.wg)(),(0,o.iD)("div",A,[(0,o._)("div",K,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.file.patterns,((t,e)=>((0,o.wg)(),(0,o.iD)("label",{for:t.name,key:t},[(0,o._)("input",{ref_for:!0,ref:"data",id:t.name,type:"text",placeholder:t.desc},null,8,M),(0,o._)("span",{style:(0,p.j5)(`--index: ${e}`)},(0,p.zw)(t.desc),5)],8,V)))),128))]),(0,o._)("button",{onClick:e[1]||(e[1]=(...t)=>s.postData&&s.postData(...t)),class:"btn btn-success",style:{float:"left",padding:"12px 20px","margin-top":"30px"}}," Изменить/Скачать ")])):((0,o.wg)(),(0,o.iD)("div",S,[(0,o.Uk)(" Документе отсуствуют поля для редактирования. "),(0,o._)("p",{onClick:e[0]||(e[0]=t=>s.deleteDocument(this.$route.params.id)),style:{color:"#4cbc89",cursor:"pointer",display:"contents"}}," Удалить? ")]))])):((0,o.wg)(),(0,o.iD)("div",G,"Такого файла не существует"))],64)}var Q={data(){return{file:{}}},setup(){const t=(0,P.pm)();return{toast:t}},methods:{parseDataFromInput(){const t={};for(let e of this.$refs.data)t[e.id]=e.value;return{...t,id:this.$route.params.id}},async postData(){const t=this.parseDataFromInput(),e=new URLSearchParams(t).toString();window.location.href=`http://eldorqazwe.online/fill_template?${e}`},async deleteDocument(t){const e=await fetch(`http://eldorqazwe.online/delete_template?id=${t}`);if(e.ok){const n=await e.json();console.log(n),n.status&&(this.toast.info(`Документ №${t} удалён.\nВы будете перенаправлены на главную страницу через 5 секунд`),setTimeout((()=>{window.location.href=document.location.origin}),5e3))}}},async mounted(){const t=await fetch(`http://eldorqazwe.online/get_template_info?id=${this.$route.params.id}`);if(t.ok){const e=await t.json();e.status&&(this.file=e.data)}}};const X=(0,s.Z)(Q,[["render",J],["__scopeId","data-v-019b26e0"]]);var tt=X;const et=[{path:"/",name:"home",component:L},{path:"/file/:id",name:"file",component:tt}],nt=(0,d.p7)({history:(0,d.PO)(),routes:et});var it=nt;n(343);const ot=(0,i.ri)(c),at={position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1};ot.use(P.ZP,at),ot.use(it),ot.mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,a){if(!i){var s=1/0;for(d=0;d<t.length;d++){i=t[d][0],o=t[d][1],a=t[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&a||s>=a)&&Object.keys(n.O).every((function(t){return n.O[t](i[r])}))?i.splice(r--,1):(l=!1,a<s&&(s=a));if(l){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[i,o,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,a,s=i[0],l=i[1],r=i[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(r)var d=r(n)}for(e&&e(i);c<s.length;c++)a=s[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(d)},i=self["webpackChunkapplication"]=self["webpackChunkapplication"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(5736)}));i=n.O(i)})();
//# sourceMappingURL=app.3092de6c.js.map